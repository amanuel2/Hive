function createEvent(e,n){var t=document.createEvent("Events");if(t.initEvent(e,!1,!1),n)for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o]);return t}if(window.cordova&&!(window.cordova instanceof HTMLElement))throw new Error("cordova already defined");var channel=require("cordova/channel"),platform=require("cordova/platform"),m_document_addEventListener=document.addEventListener,m_document_removeEventListener=document.removeEventListener,m_window_addEventListener=window.addEventListener,m_window_removeEventListener=window.removeEventListener,documentEventHandlers={},windowEventHandlers={};document.addEventListener=function(e,n,t){var o=e.toLowerCase();"undefined"!=typeof documentEventHandlers[o]?documentEventHandlers[o].subscribe(n):m_document_addEventListener.call(document,e,n,t)},window.addEventListener=function(e,n,t){var o=e.toLowerCase();"undefined"!=typeof windowEventHandlers[o]?windowEventHandlers[o].subscribe(n):m_window_addEventListener.call(window,e,n,t)},document.removeEventListener=function(e,n,t){var o=e.toLowerCase();"undefined"!=typeof documentEventHandlers[o]?documentEventHandlers[o].unsubscribe(n):m_document_removeEventListener.call(document,e,n,t)},window.removeEventListener=function(e,n,t){var o=e.toLowerCase();"undefined"!=typeof windowEventHandlers[o]?windowEventHandlers[o].unsubscribe(n):m_window_removeEventListener.call(window,e,n,t)};var cordova={define:define,require:require,version:PLATFORM_VERSION_BUILD_LABEL,platformVersion:PLATFORM_VERSION_BUILD_LABEL,platformId:platform.id,addWindowEventHandler:function(e){return windowEventHandlers[e]=channel.create(e)},addStickyDocumentEventHandler:function(e){return documentEventHandlers[e]=channel.createSticky(e)},addDocumentEventHandler:function(e){return documentEventHandlers[e]=channel.create(e)},removeWindowEventHandler:function(e){delete windowEventHandlers[e]},removeDocumentEventHandler:function(e){delete documentEventHandlers[e]},getOriginalHandlers:function(){return{document:{addEventListener:m_document_addEventListener,removeEventListener:m_document_removeEventListener},window:{addEventListener:m_window_addEventListener,removeEventListener:m_window_removeEventListener}}},fireDocumentEvent:function(e,n,t){var o=createEvent(e,n);"undefined"!=typeof documentEventHandlers[e]?t?documentEventHandlers[e].fire(o):setTimeout(function(){"deviceready"==e&&document.dispatchEvent(o),documentEventHandlers[e].fire(o)},0):document.dispatchEvent(o)},fireWindowEvent:function(e,n){var t=createEvent(e,n);"undefined"!=typeof windowEventHandlers[e]?setTimeout(function(){windowEventHandlers[e].fire(t)},0):window.dispatchEvent(t)},callbackId:Math.floor(2e9*Math.random()),callbacks:{},callbackStatus:{NO_RESULT:0,OK:1,CLASS_NOT_FOUND_EXCEPTION:2,ILLEGAL_ACCESS_EXCEPTION:3,INSTANTIATION_EXCEPTION:4,MALFORMED_URL_EXCEPTION:5,IO_EXCEPTION:6,INVALID_ACTION:7,JSON_EXCEPTION:8,ERROR:9},callbackSuccess:function(e,n){cordova.callbackFromNative(e,!0,n.status,[n.message],n.keepCallback)},callbackError:function(e,n){cordova.callbackFromNative(e,!1,n.status,[n.message],n.keepCallback)},callbackFromNative:function(e,n,t,o,r){try{var d=cordova.callbacks[e];d&&(n&&t==cordova.callbackStatus.OK?d.success&&d.success.apply(null,o):n||d.fail&&d.fail.apply(null,o),r||delete cordova.callbacks[e])}catch(a){var c="Error in "+(n?"Success":"Error")+" callbackId: "+e+" : "+a;throw console&&console.log&&console.log(c),cordova.fireWindowEvent("cordovacallbackerror",{message:c}),a}},addConstructor:function(e){channel.onCordovaReady.subscribe(function(){try{e()}catch(n){console.log("Failed to run constructor: "+n)}})}};module.exports=cordova;